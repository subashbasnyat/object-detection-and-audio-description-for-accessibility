<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>AI Assistant for Disabled Users</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>
<body>

<div class="container">
    <h1>AI Assistant for Accessibility</h1>
    <p>Upload an image to receive an audio description using our intelligent assistant.</p>

    <form action="/" method="POST" enctype="multipart/form-data" id="upload-form">
        <label for="imageUpload">Select Image:</label>
        <input type="file" id="imageUpload" name="image" accept="image/*" required />
        <button type="submit" id="analyze-btn">
            Analyze Image
            <span id="spinner" class="spinner" style="display:none; margin-left:8px;"></span>
        </button>
    </form>

    {% if response %}
        <h3>Response:</h3>
        <p>{{ response }}</p>
    {% endif %}
    
    {% if error %}
        <p style="color: red;">{{ error }}</p>
    {% endif %}
    
    {% if success %}
        <p style="color: green;">{{ success }}</p>
    {% endif %}
    
    {% if image_description %}
        <h3>Image Description:</h3>
        <p>{{ image_description }}</p>
    {% endif %}
    
    {% if error_message %}
        <p style="color: red;">{{ error_message }}</p>
    {% endif %}
    
    {% if success_message %}
        <p style="color: green;">{{ success_message }}</p>
    {% endif %}
    
    {% if audio_file %}
        <audio controls>
            <source src="{{ url_for('static', filename=audio_file) }}" type="audio/mp3" />
            Your browser does not support the audio element.
        </audio>
    {% endif %}

    <hr style="margin: 30px 0;" />

    <h3>Live Camera Stream</h3>

    <img id="camera-stream" width="100%" height="auto" style="display:none; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);" />

    <div style="margin-top: 15px;">
        <button id="start-camera">Start Camera</button>
        <button id="stop-camera" disabled>Stop Camera</button>
    </div>

    <div class="footer">
        © 2025 Himalayan Encoders. All Rights Reserved. | Built for Inclusivity ❤️
    </div>
</div>

<script src="{{ url_for('static', filename='js/main.js') }}"></script>

</body>
</html>
